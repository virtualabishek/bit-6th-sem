This is an intensive topic, and since your exam is tomorrow, let's create a targeted, comprehensive guide for Unit 3.1 that merges the theory with the practical commands you must know.

## Unit 3.1: Database User Management Study Guide

This unit covers how administrators (DBAs) handle user accounts, authentication, and security within the Oracle database.

---

### I. Predefined Database Administration Accounts (Theory)

Oracle automatically creates several highly privileged accounts during installation.

| Account | Primary Role | Key Privilege / Notes | Source |
| :--- | :--- | :--- | :--- |
| **SYS** | Most powerful administrative account, owning the core Data Dictionary. Used for critical database operations, including recovery. | Granted `SYSDBA` privilege. Must always connect **AS SYSDBA**. Cannot be deleted or renamed. | |
| **SYSTEM** | A generic administrator account. Used for day-to-day tasks, but Oracle recommends creating a specific named user for routine administration. | Granted the `DBA` role. Cannot perform backup/recovery or database upgrades. | |
| **DBSNMP** | Used by the Management Agent component of Oracle Enterprise Manager (EM) for database monitoring. | Used by Oracle Enterprise Manager Cloud Control (Cloud Control). | |
| **SYSDBA/SYSOPER** | Administrative privileges (not user accounts) for high-level operations like starting up, shutting down, or recovering the database. | `SYSDBA` is for fully empowered DBAs; `SYSOPER` performs basic operational tasks without viewing user data. | |

### II. User Accounts and Creation

A user account is identified by a unique name and implicitly creates a schema (a logical container for objects like tables and views) with the same name.

#### A. Required Attributes upon Creation
When creating a user, you must specify: username, authentication method, default tablespace (for permanent objects), temporary tablespace (for sort segments), and optionally, quotas and a profile.

#### B. Practical Code: Create a User
To create a user named `TRAINEE` with a password, required tablespaces, and a quota:

```sql
-- Connect as a user with CREATE USER privilege (e.g., SYS or SYSTEM)
CREATE USER TRAINEE IDENTIFIED BY T_pass123 -- Database authentication using password
DEFAULT TABLESPACE USERS                -- Where permanent objects go
TEMPORARY TABLESPACE TEMP               -- Where temporary segments go
QUOTA 100M ON USERS;                     -- Grants 100MB space usage on the USERS tablespace

-- Grant minimum privilege required to connect to the database
GRANT CREATE SESSION TO TRAINEE;
```

### III. User Authentication

The authentication method confirms the user is authorized to use the account.

| Method | Description | Practical Code Example | Source |
| :--- | :--- | :--- | :--- |
| **Database** | Password stored encrypted in the database. | `CREATE USER DB_USER IDENTIFIED BY password;` | |
| **OS/External** | Authentication is handled by the operating system (OS). DB user name is often prefixed by `OS_AUTHENT_PREFIX` (default `OPS$`). | `CREATE USER OPS$OS_USER IDENTIFIED EXTERNALLY;` | |
| **Schema-Only** | Account created without an authentication method/password; cannot log in directly. Useful for application schemas. | `CREATE USER APP_SCHEMA NO AUTHENTICATION;` | |

### IV. Managing User Accounts (Alter, Lock, Expire)

You use the `ALTER USER` command to modify almost any property associated with a user account.

| Action | Practical Code | Notes | Source |
| :--- | :--- | :--- | :--- |
| **Change Password** | `ALTER USER TRAINEE IDENTIFIED BY T_NewPass;` | Password change is case sensitive in modern Oracle versions. The SQL*Plus `PASSWORD` command is generally recommended as it doesn't display the new password. | |
| **Force Password Expiration** | `ALTER USER TRAINEE PASSWORD EXPIRE;` | User must change the password the next time they log in. | |
| **Lock Account** | `ALTER USER TRAINEE ACCOUNT LOCK;` | Temporarily denies access to the database. Attempting to connect results in `ORA-28000: the account is locked`. | |
| **Unlock Account** | `ALTER USER TRAINEE ACCOUNT UNLOCK;` | Re-enables login access. | |
| **Modify Quota** | `ALTER USER TRAINEE QUOTA 500M ON USERS;` | Changes the disk space limit a user can consume in a tablespace. Use `UNLIMITED` to remove constraints. | |

### V. Dropping Users and Terminating Sessions

#### A. Dropping a User
To drop a user and their objects, you must have the `DROP USER` system privilege.

| Command | Purpose | Notes | Source |
| :--- | :--- | :--- | :--- |
| `DROP USER TRAINEE;` | Drops the user account. | Fails if the user owns any database objects. | |
| `DROP USER TRAINEE CASCADE;` | Drops the user, and immediately drops all objects owned by that user in their schema (tables, views, etc.). | **Mandatory** if the user owns objects. If other schema objects refer to these dropped objects, they become invalid. | |

**Note:** You **cannot** drop a user who is currently connected to the database.

#### B. Terminating a User Session
If a user is logged in, you must terminate their session before attempting to drop the account.

1.  **Find the Session ID (SID) and Serial Number (SERIAL#):**
    ```sql
    SELECT SID, SERIAL#, USERNAME FROM V$SESSION WHERE USERNAME = 'TRAINEE';
    ```
    (Note: You would need the correct privileges to query the `V$SESSION` view).

2.  **Kill the Session:**
    ```sql
    ALTER SYSTEM KILL SESSION 'SID, SERIAL#'; -- Replace SID and SERIAL# with values found above
    ```

### VI. Monitoring User Information

You monitor users primarily by querying the Data Dictionary views.

```sql
-- Query DBA_USERS to check account status, profile, and tablespaces:
SELECT 
    USERNAME, 
    ACCOUNT_STATUS,        -- Possible values: OPEN, LOCKED, EXPIRED, EXPIRED (GRACE)
    PROFILE,
    DEFAULT_TABLESPACE, 
    TEMPORARY_TABLESPACE
FROM DBA_USERS
WHERE USERNAME = 'JOHN'; --
```

---

## Exam Practice Drill

Let's test your practical knowledge with a common scenario.

Imagine you need to decommission a legacy user named `LEGACY_APP`. The user is currently connected to the database and owns many tables.

Provide the exact sequence of two (2) SQL commands needed to successfully remove this user and all their objects from the database. Assume the user's Session ID is `150` and Serial Number is `3000`.

What are those two commands?
