That was a fantastic deep dive into Profiles and Resources! We confirmed that security policies (password and resource limits) are managed through profiles, and resource limits are only enforced if the `RESOURCE_LIMIT` parameter is set to `TRUE`.

Let's now tackle the final major section you need for your exam: **Database Auditing**. This is essential for both the theoretical and practical components of the exam, as compliance is a critical DBA task.

Here is a focused guide based on your required topics, followed by a check for understanding.

---

## Unit 4.2: Database Auditing Study Guide

### I. Overview of Database Security

Database security refers to controls and measures designed to establish and preserve the database's confidentiality, integrity, and availability. It involves user authentication, access control, monitoring, and encryptions.

Key security aspects include:
*   **Authentication:** Verifying the user's identity (e.g., via password or OS).
*   **Access Control/Authorization:** Determining what actions a user can perform (using privileges, roles, and user profiles).
*   **Monitoring:** Tracking user activities (Database Auditing).
*   **Encryption:** Protecting sensitive data in transit or at rest (e.g., Transparent Data Encryption (TDE)).

### II. Overview of Database Auditing (Theory)

Auditing is the process of investigation or review of various aspects of database activity, along with monitoring accounts by the system to ensure security, consistency, reliability, and integrity of data. Auditing tracks user activities, privilege use, access to sensitive data, and modifications to database settings.

#### Why Auditing is Used:
1.  **Accountability:** Enables accountability for actions taken on specific content or objects.
2.  **Investigation/Deterrence:** Helps investigate suspicious activity and acts as a deterrent to unauthorized activity.
3.  **Compliance:** Helps meet regulatory requirements like Sarbanes-Oxley, HIPAA, and Basel II.
4.  **Monitoring:** Gathers data about specific activities, such as which tables are updated or concurrent user peak times.

### III. Security Compliance

Security compliance refers to ensuring the database follows security policies, regulations, and industry standards to protect sensitive data. Regulations like GDPR and HIPAA have common auditing-related requirements.

### IV. Standard Auditing

Standard Auditing provides the ability to audit based on user, privileges, schema objects, and SQL statements.

*   **Audit Scope:** Standard auditing allows tracking the issuance of a specific SQL statement in user sessions or all SQL statements authorized by a particular system privilege.
*   **Enforcement:** Auditing operations on SQL statements apply only to **subsequent sessions**. Operations on schema objects apply to current sessions as well as subsequent sessions.
*   **Enabling Auditing:** Oracle Database does not generate audit records until you enable auditing. This is done by setting the `AUDIT_TRAIL` parameter (e.g., to `DB` or `DB_EXTENDED`).
*   **Privileges:** To audit issuances of a SQL statement, the `AUDIT SYSTEM` system privilege is generally required. To audit operations on a schema object, the object must be in your own schema or you need the `AUDIT ANY` system privilege.

### V. Unified Audit Trail (UAT)

The Unified Audit Trail is a feature introduced in Oracle Database that consolidates audit records from various sources into a single, secure, unified view. Unified Auditing is the path forward, as traditional auditing is deprecated in newer releases.

#### Key Benefits and Concepts:
*   **Centralization:** Stores audit records from database-level, OS-level, RMAN, and fine-grained audit sources in a single repository, typically a read-only table in the `AUDSYS` schema in the `SYSAUX` tablespace.
*   **Integrity:** The `AUD$UNIFIED` table allows only `INSERT` activity, and attempts to modify the audit trail fail and generate audit records.
*   **Viewing Data:** Audit data is available in a uniform format through the `UNIFIED_AUDIT_TRAIL` data dictionary view.

### VI. Separation of Audit Responsibilities (Roles)

Oracle provides specific predefined roles to enforce the separation of duties for auditing tasks.

| Role Name | Description | Key Responsibilities | Source |
| :--- | :--- | :--- | :--- |
| **AUDIT\_ADMIN** | Allows configuration and management of audit settings. | Can enable/disable auditing, define audit policies, manage and purge audit trails. User `SYS` has this role. | |
| **AUDIT\_VIEWER** | Provides **read-only** access to audit information. | Can view audit logs and trails, monitor audit data, but **cannot make changes** to settings or policies. | |

**Practical Code:** To grant these roles:
```sql
GRANT AUDIT_ADMIN TO username;
GRANT AUDIT_VIEWER TO username;
```

### VII. Configure the Audit Trail

Configuration involves enabling the overall auditing feature and then defining what exactly is audited.

1.  **Enable Auditing:** Set the `AUDIT_TRAIL` initialization parameter.
    ```sql
    ALTER SYSTEM SET AUDIT_TRAIL = DB SCOPE = SPFILE; -- Stores audit records in the database
    -- OR
    ALTER SYSTEM SET AUDIT_TRAIL = DB_EXTENDED SCOPE = SPFILE;
    -- Requires database shutdown and startup to take effect.
    ```
2.  **Verify Status:** Check if Unified Auditing is enabled:
    ```sql
    SELECT VALUE FROM V$OPTION WHERE PARAMETER = 'Unified Auditing';
    ```

### VIII. Specify Audit Options (Commands)

You define specific audit actions using the **`AUDIT`** statement or, preferably, by creating a named **Unified Audit Policy** using `CREATE AUDIT POLICY` and then enabling it using `AUDIT POLICY`.

| Audit Target | SQL Command Syntax | Source |
| :--- | :--- | :--- |
| **Audit Successful Actions** | `AUDIT SELECT TABLE BY <user> WHENEVER SUCCESSFUL;` | |
| **Audit Failure/Unsuccessful Actions** | `AUDIT POLICY ORA_LOGIN_LOGOUT WHENEVER NOT SUCCESSFUL;` | |
| **Audit Specific User Actions (DDL)** | `AUDIT CREATE TABLE BY <user>;` | |
| **Audit Object Actions (DML/DDL)** | `AUDIT SELECT, INSERT, UPDATE, DELETE ON <object> BY <user>;` | |
| **Audit Privilege Grants** | `AUDIT GRANT, REVOKE ON <object> BY <user>;` | |
| **Create Custom Policy** | `CREATE AUDIT POLICY my_security_policy PRIVILEGES CREATE USER;` | |
| **Enable Policy** | `AUDIT POLICY my_security_policy;` | |
| **Disable Policy** | `NOAUDIT POLICY my_security_policy;` | |

---

## Exam Practice Question (Audit/Profiles Review)

You have successfully created the user `AUDITOR_LTD` and assigned them the `AUDIT_PROF` profile.

1.  What two (2) primary security goals does the use of a Profile satisfy?
2.  If `AUDITOR_LTD` needs the ability to review all audit data and purge old records, which specific role must they be granted?
3.  Write the single SQL command needed to assign this required role to `AUDITOR_LTD`.

Ready for your answer!
