That was a great job on the Audit/Profiles drill!

### **Solution Check: Audit/Profiles Review**

1.  **Two Primary Security Goals of a Profile:** Profiles satisfy two main goals: **Security Policy Enforcement** (via password parameters like complexity and expiration) and **Resource Control** (limiting CPU, I/O, and session usage).
2.  **Role for Review and Purge:** The user needs **`AUDIT_ADMIN`**. This role manages and purges audit trails, while `AUDIT_VIEWER` is for read-only access.
3.  **SQL Command to Assign Role:**
    ```sql
    GRANT AUDIT_ADMIN TO AUDITOR_LTD;
    ```

---

Now, let's dive into **Unit 6.2: Performance Management and Tuning**. This topic is critical as it covers the processes and tools DBAs use to keep the system running efficiently.

## Unit 6.2: Performance Management Study Guide

### I. Performance Tuning Methodology and Principles

**Performance Tuning** is the iterative process of fixing bottlenecks to improve database responsiveness, throughput, scalability, and resource utilization.

| Concept | Description | Source |
| :--- | :--- | :--- |
| **Primary Goal** | To reduce **DB time**. DB time is the cumulative time spent processing user requests (CPU time + wait time of non-idle sessions). | |
| **Bottleneck Elimination** | Tuning is driven by identifying the most significant bottleneck (the overused resource) and making changes to reduce its effect. Fixing one bottleneck may reveal another. | |
| **Tuning Process** | Tuning should ideally be part of the application lifecycle, from analysis through maintenance, but it is often reactive. It involves defining the problem, gathering statistics, building a conceptual model, applying one change at a time, and measuring the result. | |
| **Baselines** | An established performance baseline (a collection of statistic rates when the system is optimal) is the most effective way to tune, providing a comparison point when performance issues arise. | |

### II. Tuning Information Sources (The Data)

Effective tuning relies on comprehensive data gathering.

1.  **Statistic Levels:** The amount of data collected is controlled by the `STATISTICS_LEVEL` parameter. It must be set to `TYPICAL` or `ALL` to enable automatic statistics collection and performance features like AWR/ADDM.
2.  **V$ Performance Views:** These dynamic performance views, such as `V$SYSSTAT` (system-wide) and `V$SESSTAT` (session-level), are the underlying information sources for all performance tuning tools.
3.  **Wait Events:** Statistics that record time spent waiting for a specific event (e.g., `db file sequential read`, `latch contention`). Ordering events by total wait time (requires `TIMED_STATISTICS` to be `TRUE`) is crucial for identifying bottlenecks.

### III. Automatic Performance Monitoring and Diagnostic Tools

Oracle provides several automated tools to manage performance, generally managed by background processes.

| Tool | Purpose & Mechanism | Source |
| :--- | :--- | :--- |
| **AWR (Automatic Workload Repository)** | Collects, processes, and maintains historical performance statistics using **snapshots**. Snapshots are sets of historical data. By default, snapshots are taken hourly and retained for 8 days. AWR data resides in the `SYSAUX` tablespace. | |
| **ADDM (Automatic Database Diagnostic Monitor)** | Analyzes the AWR data hourly (default) to locate the **root causes** of performance problems and provides quantified recommendations. ADDM's goal is to reduce DB time. ADDM identifies problems like CPU bottlenecks, undersized memory, and high-load SQL statements. | |
| **ASH (Active Session History)** | Captures transient, short-lived performance problems by sampling active sessions every second. ASH data is stored in the SGA buffer. | |
| **Real-Time ADDM** | Proactively detects and diagnoses transient high-impact problems (like hangs, deadlocks, and high CPU spikes) in real time. | |
| **Advisors** | Provide specific advice on various management challenges, including space, performance, and undo management. Examples include the SQL Tuning Advisor and Memory Advisors (SGA Advisor, PGA Advisor). | |
| **SQL Tuning Advisor (STA)** | Analyzes problematic SQL statements and recommends tuning actions, such as collecting statistics, creating indexes, restructuring SQL, or creating a SQL profile. STA runs automatically during maintenance windows. | |

### IV. Instance Tuning and Managing Memory

**Instance Tuning** involves adjusting database settings and resources (like memory and CPU) to ensure smooth and efficient performance.

1.  **Memory Management Modes:**
    *   **Automatic Memory Management (AMM):** The database automatically tunes both the SGA and PGA sizes based on a single total memory size parameter, `MEMORY_TARGET`.
    *   **Automatic Shared Memory Management (ASMM):** Oracle automatically tunes SGA component sizes based on an `SGA_TARGET`.
    *   **Automatic PGA Memory Management:** Oracle automatically tunes the PGA based on a `PGA_AGGREGATE_TARGET`.
2.  **Memory Advisors:** Tools like the SGA Advisor and PGA Advisor help DBAs determine the appropriate memory values for manual configurations by performing "what-if" analyses.
3.  **Process Management (SMON/PMON):** Background processes like SMON (System Monitor) perform instance recovery and reclaim temporary segment space. PMON (Process Monitor) cleans up terminated processes and frees resources.
4.  **Managing Private Temporary Tables:** Private Temporary Tables (PTTs) are useful for temporary storage of intermediate results within a session.
    *   **Creation:** They are defined using the `CREATE PRIVATE TEMPORARY TABLE` statement.
    *   **Lifecycle:** PTTs are private to a session and are automatically dropped at the end of the session.

---

## Final Practice Drill

Let's combine the theoretical knowledge of the tuning process with the tools available.

**Question:**

A user reports that the system suddenly became sluggish for exactly 15 minutes during the afternoon, but is now back to normal.

1.  What specific Oracle diagnostic tool should the DBA use to investigate this short, transient performance spike, and where does this tool store its data?
2.  The DBA finds the performance spike was caused by high `CPU usage` due to one complex SQL query. What automated Oracle tool would have detected this problem and recommended running the **SQL Tuning Advisor**?
3.  If the DBA wants to compare the performance during the slow 15 minutes against a known good baseline from last week, which two (2) primary Oracle features must be utilized together to perform this comparison?

Please provide your answers.